class Dialog{static OK_OPTION=1;static CANCEL_OPTION=0;static async confirmDialog(t,n){const o=document.createElement("dialog");const s=document.createElement("h4");const a=document.createElement("div");const e=document.createElement("div");const i=document.createElement("button");const r=document.createElement("button");o.setAttribute("id","inputDialog");s.setAttribute("id","title");a.setAttribute("id","message");e.setAttribute("id","divButtons");i.setAttribute("id","btnOk");i.innerText="OK";r.setAttribute("id","btnCancel");r.innerText="Cancel";e.append(i,r);o.append(s,a,e);$("body").prepend(o);const c={operation:0};return new Promise(e=>{if(!o.open){o.showModal();s.innerText=t;a.innerHTML=n;i.addEventListener("click",()=>{o.close();$(o).remove();c.operation=1;e(c)});r.addEventListener("click",()=>{o.close();$(o).remove();c.operation=0;e(c)})}})}static async changePasswordDialog(t,o){const s=document.createElement("dialog");const a=document.createElement("h4");const i=document.createElement("div");const e=document.createElement("form");const r=document.createElement("input");const c=document.createElement("input");const n=document.createElement("div");const d=document.createElement("button");const l=document.createElement("button");const m=document.createElement("div");r.setAttribute("class","form-control mb-3");c.setAttribute("class","form-control");s.setAttribute("id","inputDialog");a.setAttribute("id","title");i.setAttribute("id","message");n.setAttribute("id","divButtons");d.setAttribute("id","btnSave");d.innerText="Save";l.setAttribute("id","btnCancel");l.innerText="Cancel";r.setAttribute("type","password");r.setAttribute("placeholder","New Password");r.setAttribute("id","newPassword");c.setAttribute("type","password");c.setAttribute("placeholder","Confirm Password");c.setAttribute("id","confirmPassword");m.setAttribute("id","errorMessage");m.style.color="red";e.append(r,c,m);n.append(d,l);s.append(a,i,e,n);document.body.prepend(s);const u={operation:0,newPassword:null};return new Promise(n=>{s.showModal();a.innerText=t;i.innerHTML=o;d.addEventListener("click",()=>{const e=r.value.trim();const t=c.value.trim();if(e===t){s.close();$(s).remove();u.operation=1;u.newPassword=e;n(u)}else{m.innerText="Passwords do not match. Please try again."}});l.addEventListener("click",()=>{s.close();$(s).remove();n(u)});r.addEventListener("input",e);c.addEventListener("input",e);function e(){const e=r.value.trim();const t=c.value.trim();const n=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;if(e!==t&&t.length>0){m.innerText="Passwords do not match."}else if(!n.test(e)){m.innerText="Password must be at least 8 characters \nand include both letters and numbers."}else{m.innerText=""}}})}static async showCropModal(e,t,n,o){const s=document.createElement("dialog");s.setAttribute("id","messageDialog");s.style.width="700px";s.style.padding="20px";s.style.textAlign="center";s.style.borderRadius="0.5rem";o.sort((e,t)=>t.totalAreaPlanted-e.totalAreaPlanted);s.innerHTML=`
        <div class="container-fluid">
            <ul class="nav nav-tabs d-flex justify-content-around w-100" style="border-bottom: 2px solid #007bff;">
                <li class="nav-item w-50">
                    <a class="nav-link active bg-white text-center w-100" id="cropInfoTab" href="#" style="font-weight: bold; color: #28a745;">Crop Information</a>
                </li>
                <li class="nav-item w-50">
                    <a class="nav-link bg-white text-center w-100" id="varietyTab" href="#" style="font-weight: bold; color: #6c757d;">Variety</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active bg-transparent" id="cropInfoContent" style="text-align: justify; font-size: 0.9rem; margin-top: 15px;">
                    <div class="text-center">
                        <div style="background-color: #C9AF94; color: white; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 1.5rem; margin-bottom: 15px;">
                            ${n}
                        </div>
                        <img id="cropImg" src="${e}" alt="Crop Image" class="img-fluid border border-primary rounded" style="width: 30rem; height: auto; margin-bottom: 10px;">
                    </div>
    
                    <div class="text-dark mt-2">${t}</div>
                </div>
                <div class="tab-pane fade bg-transparent" id="varietyContent" style="text-align: justify; font-size: 0.9rem; color: #333;">
                    <div class="accordion" id="varietyAccordion">
                        ${o.map((e,t)=>`
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading${t}">
                                <button class="bg-success accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${t}" aria-expanded="false" aria-controls="collapse${t}">
                                    ${e.varietyName} (Total Area Planted: ${e.totalAreaPlanted})
                                </button>
                            </h2>
                            <div id="collapse${t}" class="accordion-collapse collapse" aria-labelledby="heading${t}" data-bs-parent="#varietyAccordion">
                                <div class="accordion-body">
                                    <img src="${e.cropImg}" alt="${e.varietyName} Image" class="img-fluid border border-primary rounded" style="width: 20rem; height: auto; margin-bottom: 10px;">
                                    <p><strong>Characteristics:</strong></p>
                                    <p><strong>Color:</strong> ${e.color}</p>
                                    <p><strong>Size:</strong> ${e.size}</p>
                                    <p><strong>Flavor:</strong> ${e.flavor}</p>
                                    <p><strong>Growth Conditions:</strong> ${e.growthConditions}</p>
                                    <p><strong>Pest/Disease Resistance:</strong> ${e.pestDiseaseResistance}</p>
                                    <p><strong>Recommended Practices:</strong> ${e.recommendedPractices}</p>
                                </div>
                            </div>
                        </div>
                        `).join("")}
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-3">
                <button id="btnClose" class="btn btn-danger" style="font-weight: bold;">Close</button>
            </div>
        </div>
        `;document.body.append(s);const a={operation:0};return new Promise(e=>{if(!s.open){s.showModal();const n=s.querySelector("#cropInfoContent");const o=s.querySelector("#varietyContent");s.querySelector(".nav-tabs").addEventListener("click",e=>{const t=e.target;if(t.id==="cropInfoTab"){n.classList.add("show","active");o.classList.remove("show","active");t.style.color="#28a745";s.querySelector("#varietyTab").style.color="#6c757d"}else if(t.id==="varietyTab"){o.classList.add("show","active");n.classList.remove("show","active");t.style.color="#28a745";s.querySelector("#cropInfoTab").style.color="#6c757d"}});s.querySelector("#btnClose").addEventListener("click",()=>{s.close();s.remove();a.operation=1;e(a)})}})}static async downloadDialog(){const n=document.createElement("dialog");const e=document.createElement("div");const t=document.createElement("h5");const o=document.createElement("div");const s=document.createElement("button");const a=document.createElement("button");const i=document.createElement("button");const r=document.createElement("button");n.setAttribute("id","downloadModal");n.setAttribute("role","dialog");n.setAttribute("aria-labelledby","downloadModalLabel");n.style.padding="20px";n.style.borderRadius="8px";n.style.maxWidth="400px";n.style.boxShadow="0 4px 10px rgba(0, 0, 0, 0.1)";t.className="modal-title text-center mb-4";t.id="downloadModalLabel";t.innerText="Download Options";r.type="button";r.innerText="Close";r.className="dialog-close btn btn-secondary";r.style.width="100%";r.addEventListener("click",()=>{n.close()});s.className="btn btn-primary mb-3";s.innerHTML='<i class="fas fa-file-csv"></i> Download CSV';s.setAttribute("data-format","csv");s.style.width="100%";a.className="btn btn-success mb-3";a.innerHTML='<i class="fas fa-file-excel"></i> Download Excel';a.setAttribute("data-format","xlsx");a.style.width="100%";i.className="btn btn-danger mb-3";i.innerHTML='<i class="fas fa-file-pdf"></i> Download PDF';i.setAttribute("data-format","pdf");i.style.width="100%";let c;const d=new Promise(e=>{c=e});[s,a,i].forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.getAttribute("data-format");if(c){c(t)}n.close()})});o.className="d-grid gap-3";o.append(s,a,i,r);e.className="text-center";e.append(t,o);n.appendChild(e);document.body.appendChild(n);n.showModal();return d}static async showInfoModal(e){const t=document.createElement("dialog");const n=document.createElement("div");const o=document.createElement("button");const s=document.createElement("div");t.setAttribute("id","messageDialog");o.setAttribute("id","btnClose");o.innerText="Close";t.style.maxWidth="1000px";t.style.padding="20px";t.style.fontSize="1em";t.style.textAlign="justify";t.style.margin="20px";n.style.display="flex";n.style.flexDirection="column";n.style.alignItems="center";n.style.gap="20px";n.style.margin="20px";n.innerHTML=e;s.style.display="flex";s.style.justifyContent="flex-end";s.append(o);n.append(s);t.append(n);document.body.append(t);const a={operation:0};return new Promise(e=>{if(!t.open){t.showModal();o.addEventListener("click",()=>{t.close();t.remove();a.operation=1;e(a)})}})}static async showMessageDialog(n,o){const s=document.createElement("dialog");const a=document.createElement("h4");const i=document.createElement("div");const r=document.createElement("button");s.setAttribute("id","messageDialog");a.setAttribute("id","title");i.setAttribute("id","message");r.setAttribute("id","btnOk");r.innerText="OK";s.append(a,i,r);$("body").prepend(s);return new Promise(e=>{if(!s.open){s.showModal();a.innerText=n;i.innerHTML=o;r.focus();function t(e){if(e.key==="Enter"&&document.activeElement===r){e.preventDefault();r.dispatchEvent(new Event("click"))}}document.addEventListener("keydown",t);r.addEventListener("click",()=>{s.close();$(s).remove();document.removeEventListener("keydown",t);e()})}})}}export default Dialog;