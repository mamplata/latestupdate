/*! For license information please see soilHealth.js.LICENSE.txt */
(()=>{"use strict";var t={370:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(){c=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new O(r||[]);return a(i,"_invoke",{value:S(t,n,c)}),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var f="suspendedStart",g="suspendedYield",m="executing",v="completed",y={};function b(){}function w(){}function x(){}var E={};p(E,s,(function(){return this}));var L=Object.getPrototypeOf,k=L&&L(L(N([])));k&&k!==n&&o.call(k,s)&&(E=k);var A=x.prototype=b.prototype=Object.create(E);function P(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(a,i,c,s){var l=h(t[a],t,i);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==r(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(p).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?v:g,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(o.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=x,a(A,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,u,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},P(C.prototype),p(C.prototype,l,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new C(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(A),p(A,u,"Generator"),p(A,s,(function(){return this})),p(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function s(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){s(a,r,o,i,c,"next",t)}function c(t){s(a,r,o,i,c,"throw",t)}i(void 0)}))}}function u(){return p.apply(this,arguments)}function p(){return(p=l(c().mark((function t(){var e,n,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d();case 3:if(0!==(e=t.sent).length){t.next=6;break}return t.abrupt("return","N/A");case 6:if(0!==(n=e.map((function(t){var e=t.monthPlanted.match(/\d{4}$/);return e?parseInt(e[0],10):null})).filter((function(t){return null!==t}))).length){t.next=9;break}return t.abrupt("return","N/A");case 9:return r=Math.min.apply(Math,o(n)),a=Math.max.apply(Math,o(n)),t.abrupt("return",r===a?"".concat(r):"".concat(r," to ").concat(a));case 14:return t.prev=14,t.t0=t.catch(0),console.error("Error fetching or processing production data:",t.t0),t.abrupt("return","N/A");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function d(){return new Promise((function(t,e){$.ajax({url:"api/productions",method:"GET",dataType:"json",success:function(e){t(e)},error:function(t,n,r){console.error("Failed to fetch production data:",n,r),e([])}})}))}function h(t,e){return new Promise((function(n,r){$.ajax({url:"api/downloads/add",method:"POST",dataType:"json",data:{name:t,type:e},success:function(t){n(t)},error:function(t,e,n){console.error("Failed to add download:",e,n),r(t.responseJSON||"An error occurred")}})}))}n.d(e,{IZ:()=>h,RB:()=>u})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r=n(370);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new O(r||[]);return i(a,"_invoke",{value:S(t,n,c)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var f="suspendedStart",g="suspendedYield",m="executing",v="completed",y={};function b(){}function w(){}function x(){}var E={};p(E,s,(function(){return this}));var L=Object.getPrototypeOf,k=L&&L(L(N([])));k&&k!==n&&r.call(k,s)&&(E=k);var A=x.prototype=b.prototype=Object.create(E);function P(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(a,i,c,s){var l=h(t[a],t,i);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==o(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(p).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=f;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?v:g,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return w.prototype=x,i(A,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,u,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},P(C.prototype),p(C.prototype,l,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new C(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(A),p(A,u,"Generator"),p(A,s,(function(){return this})),p(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function i(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,s,"next",t)}function s(t){i(a,r,o,c,s,"throw",t)}c(void 0)}))}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function l(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var p=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=null,n=[{key:"confirmDialog",value:(u=c(a().mark((function t(e,n){var r,o,i,c,s,l,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.createElement("dialog"),o=document.createElement("h4"),i=document.createElement("div"),c=document.createElement("div"),s=document.createElement("button"),l=document.createElement("button"),r.setAttribute("id","inputDialog"),o.setAttribute("id","title"),i.setAttribute("id","message"),c.setAttribute("id","divButtons"),s.setAttribute("id","btnOk"),s.innerText="OK",l.setAttribute("id","btnCancel"),l.innerText="Cancel",c.append(s,l),r.append(o,i,c),$("body").prepend(r),u={operation:0},t.abrupt("return",new Promise((function(t){r.open||(r.showModal(),o.innerText=e,i.innerHTML=n,s.addEventListener("click",(function(){r.close(),$(r).remove(),u.operation=1,t(u)})),l.addEventListener("click",(function(){r.close(),$(r).remove(),u.operation=0,t(u)})))})));case 19:case"end":return t.stop()}}),t)}))),function(t,e){return u.apply(this,arguments)})},{key:"changePasswordDialog",value:(l=c(a().mark((function t(e,n){var r,o,i,c,s,l,u,p,d,h,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.createElement("dialog"),o=document.createElement("h4"),i=document.createElement("div"),c=document.createElement("form"),s=document.createElement("input"),l=document.createElement("input"),u=document.createElement("div"),p=document.createElement("button"),d=document.createElement("button"),h=document.createElement("div"),s.setAttribute("class","form-control mb-3"),l.setAttribute("class","form-control"),r.setAttribute("id","inputDialog"),o.setAttribute("id","title"),i.setAttribute("id","message"),u.setAttribute("id","divButtons"),p.setAttribute("id","btnSave"),p.innerText="Save",d.setAttribute("id","btnCancel"),d.innerText="Cancel",s.setAttribute("type","password"),s.setAttribute("placeholder","New Password"),s.setAttribute("id","newPassword"),l.setAttribute("type","password"),l.setAttribute("placeholder","Confirm Password"),l.setAttribute("id","confirmPassword"),h.setAttribute("id","errorMessage"),h.style.color="red",c.append(s,l,h),u.append(p,d),r.append(o,i,c,u),document.body.prepend(r),f={operation:0,newPassword:null},t.abrupt("return",new Promise((function(t){function a(){var t=s.value.trim(),e=l.value.trim();t!==e&&e.length>0?h.innerText="Passwords do not match.":/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(t)?h.innerText="":h.innerText="Password must be at least 8 characters \nand include both letters and numbers."}r.showModal(),o.innerText=e,i.innerHTML=n,p.addEventListener("click",(function(){var e=s.value.trim();e===l.value.trim()?(r.close(),$(r).remove(),f.operation=1,f.newPassword=e,t(f)):h.innerText="Passwords do not match. Please try again."})),d.addEventListener("click",(function(){r.close(),$(r).remove(),t(f)})),s.addEventListener("input",a),l.addEventListener("input",a)})));case 34:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"showCropModal",value:(i=c(a().mark((function t(e,n,r,o){var i,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=document.createElement("dialog")).setAttribute("id","messageDialog"),i.style.width="700px",i.style.padding="20px",i.style.textAlign="center",i.style.borderRadius="0.5rem",o.sort((function(t,e){return e.totalAreaPlanted-t.totalAreaPlanted})),i.innerHTML='\n        <div class="container-fluid">\n            <ul class="nav nav-tabs d-flex justify-content-around w-100" style="border-bottom: 2px solid #007bff;">\n                <li class="nav-item w-50">\n                    <a class="nav-link active bg-white text-center w-100" id="cropInfoTab" href="#" style="font-weight: bold; color: #28a745;">Crop Information</a>\n                </li>\n                <li class="nav-item w-50">\n                    <a class="nav-link bg-white text-center w-100" id="varietyTab" href="#" style="font-weight: bold; color: #6c757d;">Variety</a>\n                </li>\n            </ul>\n            <div class="tab-content">\n                <div class="tab-pane fade show active bg-transparent" id="cropInfoContent" style="text-align: justify; font-size: 0.9rem; margin-top: 15px;">\n                    <div class="text-center">\n                        <div style="background-color: #C9AF94; color: white; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 1.5rem; margin-bottom: 15px;">\n                            '.concat(r,'\n                        </div>\n                        <img id="cropImg" src="').concat(e,'" alt="Crop Image" class="img-fluid border border-primary rounded" style="width: 30rem; height: auto; margin-bottom: 10px;">\n                    </div>\n    \n                    <div class="text-dark mt-2">').concat(n,'</div>\n                </div>\n                <div class="tab-pane fade bg-transparent" id="varietyContent" style="text-align: justify; font-size: 0.9rem; color: #333;">\n                    <div class="accordion" id="varietyAccordion">\n                        ').concat(o.map((function(t,e){return'\n                        <div class="accordion-item">\n                            <h2 class="accordion-header" id="heading'.concat(e,'">\n                                <button class="bg-success accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse').concat(e,'" aria-expanded="false" aria-controls="collapse').concat(e,'">\n                                    ').concat(t.varietyName," (Total Area Planted: ").concat(t.totalAreaPlanted,')\n                                </button>\n                            </h2>\n                            <div id="collapse').concat(e,'" class="accordion-collapse collapse" aria-labelledby="heading').concat(e,'" data-bs-parent="#varietyAccordion">\n                                <div class="accordion-body">\n                                    <img src="').concat(t.cropImg,'" alt="').concat(t.varietyName,' Image" class="img-fluid border border-primary rounded" style="width: 20rem; height: auto; margin-bottom: 10px;">\n                                    <p><strong>Characteristics:</strong></p>\n                                    <p><strong>Color:</strong> ').concat(t.color,"</p>\n                                    <p><strong>Size:</strong> ").concat(t.size,"</p>\n                                    <p><strong>Flavor:</strong> ").concat(t.flavor,"</p>\n                                    <p><strong>Growth Conditions:</strong> ").concat(t.growthConditions,"</p>\n                                    <p><strong>Pest/Disease Resistance:</strong> ").concat(t.pestDiseaseResistance,"</p>\n                                    <p><strong>Recommended Practices:</strong> ").concat(t.recommendedPractices,"</p>\n                                </div>\n                            </div>\n                        </div>\n                        ")})).join(""),'\n                    </div>\n                </div>\n            </div>\n            <div class="d-flex justify-content-center mt-3">\n                <button id="btnClose" class="btn btn-danger" style="font-weight: bold;">Close</button>\n            </div>\n        </div>\n        '),document.body.append(i),c={operation:0},t.abrupt("return",new Promise((function(t){if(!i.open){i.showModal();var e=i.querySelector("#cropInfoContent"),n=i.querySelector("#varietyContent");i.querySelector(".nav-tabs").addEventListener("click",(function(t){var r=t.target;"cropInfoTab"===r.id?(e.classList.add("show","active"),n.classList.remove("show","active"),r.style.color="#28a745",i.querySelector("#varietyTab").style.color="#6c757d"):"varietyTab"===r.id&&(n.classList.add("show","active"),e.classList.remove("show","active"),r.style.color="#28a745",i.querySelector("#cropInfoTab").style.color="#6c757d")})),i.querySelector("#btnClose").addEventListener("click",(function(){i.close(),i.remove(),c.operation=1,t(c)}))}})));case 11:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return i.apply(this,arguments)})},{key:"downloadDialog",value:(o=c(a().mark((function t(){var e,n,r,o,i,c,s,l,u,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.createElement("dialog"),n=document.createElement("div"),r=document.createElement("h5"),o=document.createElement("div"),i=document.createElement("button"),c=document.createElement("button"),s=document.createElement("button"),l=document.createElement("button"),e.setAttribute("id","downloadModal"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","downloadModalLabel"),e.style.padding="20px",e.style.borderRadius="8px",e.style.maxWidth="400px",e.style.boxShadow="0 4px 10px rgba(0, 0, 0, 0.1)",r.className="modal-title text-center mb-4",r.id="downloadModalLabel",r.innerText="Download Options",l.type="button",l.innerText="Close",l.className="dialog-close btn btn-secondary",l.style.width="100%",l.addEventListener("click",(function(){e.close()})),i.className="btn btn-primary mb-3",i.innerHTML='<i class="fas fa-file-csv"></i> Download CSV',i.setAttribute("data-format","csv"),i.style.width="100%",c.className="btn btn-success mb-3",c.innerHTML='<i class="fas fa-file-excel"></i> Download Excel',c.setAttribute("data-format","xlsx"),c.style.width="100%",s.className="btn btn-danger mb-3",s.innerHTML='<i class="fas fa-file-pdf"></i> Download PDF',s.setAttribute("data-format","pdf"),s.style.width="100%",p=new Promise((function(t){u=t})),[i,c,s].forEach((function(t){t.addEventListener("click",(function(t){var n=t.currentTarget.getAttribute("data-format");u&&u(n),e.close()}))})),o.className="d-grid gap-3",o.append(i,c,s,l),n.className="text-center",n.append(r,o),e.appendChild(n),document.body.appendChild(e),e.showModal(),t.abrupt("return",p);case 45:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"showInfoModal",value:(r=c(a().mark((function t(e){var n,r,o,i,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.createElement("dialog"),r=document.createElement("div"),o=document.createElement("button"),i=document.createElement("div"),n.setAttribute("id","messageDialog"),o.setAttribute("id","btnClose"),o.innerText="Close",n.style.maxWidth="1000px",n.style.padding="20px",n.style.fontSize="1em",n.style.textAlign="justify",n.style.margin="20px",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="20px",r.style.margin="20px",r.innerHTML=e,i.style.display="flex",i.style.justifyContent="flex-end",i.append(o),r.append(i),n.append(r),document.body.append(n),c={operation:0},t.abrupt("return",new Promise((function(t){n.open||(n.showModal(),o.addEventListener("click",(function(){n.close(),n.remove(),c.operation=1,t(c)})))})));case 26:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i,l,u}();l(p,"OK_OPTION",1),l(p,"CANCEL_OPTION",0);const d=p;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new O(r||[]);return o(i,"_invoke",{value:S(t,n,c)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",g="suspendedYield",m="executing",v="completed",y={};function b(){}function w(){}function x(){}var E={};l(E,i,(function(){return this}));var L=Object.getPrototypeOf,k=L&&L(L(N([])));k&&k!==n&&r.call(k,i)&&(E=k);var A=x.prototype=b.prototype=Object.create(E);function P(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,a,i,c){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==h(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=p(e,n,r);if("normal"===l.type){if(o=r.done?v:g,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=x,o(A,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=l(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},e.awrap=function(t){return{__await:t}},P(C.prototype),l(C.prototype,c,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new C(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},P(A),l(A,s,"Generator"),l(A,i,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function g(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}$(document).ready((function(){var t,e,n,o,a,i=[];function c(){var t;return t=f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,r.RB)();case 3:a=t.sent,console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching year range:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),c=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){v(a,r,o,i,c,"next",t)}function c(t){v(a,r,o,i,c,"throw",t)}i(void 0)}))},c.apply(this,arguments)}function s(t,e){if(console.log(e),0===e.length)$("#".concat(t,"-body")).html('<p class="h3">Data is not available for now.</p>'),$('.download-btn[data-type="'.concat(t,'"]')).hide();else{var n=function(t){switch(t){case"Low":return{background:"bg-l",textColor:"text-white"};case"Moderately Low":return{background:"bg-ml",textColor:"text-dark"};case"Moderately High":return{background:"bg-mh",textColor:"text-dark"};case"High":return{background:"bg-h",textColor:"text-white"};default:return{background:"bg-light",textColor:"text-dark"}}},r=(f=0,g=0,m=0,v=0,y=0,b=(h=e).length,h.forEach((function(t){f+=l(t.phosphorusContent),g+=l(t.nitrogenContent),m+=l(t.potassiumContent),v+=l(t.pH),y+=l(t.generalRating)})),{phosphorus:u(f,b),nitrogen:u(g,b),potassium:u(m,b),ph:u(v,b),generalRating:u(y,b)});$("#".concat(t,"-phosphorus")).html("".concat(r.phosphorus.value," <br>(").concat(r.phosphorus.percentage,"%)")),$("#".concat(t,"-nitrogen")).html("".concat(r.nitrogen.value," <br>(").concat(r.nitrogen.percentage,"%)")),$("#".concat(t,"-potassium")).html("".concat(r.potassium.value," <br> (").concat(r.potassium.percentage,"%)")),$("#".concat(t,"-ph")).html("".concat(r.ph.value," <br>(").concat(r.ph.percentage,"%)")),$("#".concat(t,"-general")).html("".concat(r.generalRating.value," <br> (").concat(r.generalRating.percentage,"%)"));var o={type:"doughnut",data:{labels:["Phosphorus","Nitrogen","Potassium","pH","General Rating"],datasets:[{label:"Average Nutrient Levels",data:[r.phosphorus.percentage,r.nitrogen.percentage,r.potassium.percentage,r.ph.percentage,r.generalRating.percentage],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#FF9F40"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#FF9F40"]}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Nutrient Averages"},tooltip:{callbacks:{label:function(t){var e,n=t.chart.data.labels[t.dataIndex];switch(n){case"Phosphorus":e=r.phosphorus.value;break;case"Nitrogen":e=r.nitrogen.value;break;case"Potassium":e=r.potassium.value;break;case"pH":e=r.ph.value;break;case"General Rating":e=r.generalRating.value}return"".concat(n," - ").concat(e," (").concat(t.formattedValue,"%)")}}},datalabels:{color:"white"}}},plugins:[ChartDataLabels]},a=Chart.getChart("".concat(t,"Chart"));a&&a.destroy(),new Chart(document.getElementById("".concat(t,"Chart")),o);var c=$("#".concat(t,"Breakdown"));c.empty();var s={rice:{npk:{nitrogen:{level:"High",description:"Nitrogen is crucial for rice, promoting leaf and tiller growth, and enhancing grain yield. Rice plants typically require higher nitrogen levels, particularly during the vegetative stage for robust growth and development."},phosphorus:{level:"Moderate",description:"Phosphorus supports root development and early growth in rice plants. It is also important for energy transfer and grain formation. Rice usually needs moderate amounts of phosphorus."},potassium:{level:"Moderate to High",description:"Potassium is essential for improving disease resistance, water regulation, and grain quality in rice. It helps in strengthening plant cells and is important for grain filling, so moderate to high levels of potassium are required."}},ph:{level:"Moderate",description:"A pH level between 5.5 and 7.0 is considered moderate, supporting nutrient availability for rice."},generalRating:{rating:"Moderate",description:"A general rating of 'Moderate' is optimal for rice. High nutrient levels can lead to lodging."}},vegetables:{npk:{nitrogen:{level:"Moderate to High",description:"Vegetables generally require balanced NPK ratios. Leafy greens benefit from higher nitrogen levels, while root vegetables thrive on higher potassium."},phosphorus:{level:"Moderate",description:"Phosphorus is vital for root development and flower formation in many vegetable crops."},potassium:{level:"Moderate",description:"Adequate potassium is crucial for water regulation and overall plant health."}},ph:{level:"Moderate",description:"A pH of 6.0 to 7.0 is considered moderate and is ideal for most vegetables, promoting nutrient uptake."},generalRating:{rating:"High",description:"Aim for a general rating of 'High' to ensure optimal growth and yield for most vegetable crops."}},fruits:{npk:{nitrogen:{level:"Moderate",description:"Fruits generally benefit from moderate nitrogen levels to support leaf growth without sacrificing fruit development."},phosphorus:{level:"Moderate",description:"Important during the flowering stage to promote fruit set and development."},potassium:{level:"High",description:"Essential for fruit quality and yield, especially during the maturation phase."}},ph:{level:"Moderate",description:"A slightly acidic pH of 6.0 to 6.8 is considered moderate for many fruit-bearing plants, helping to maximize nutrient absorption."},generalRating:{rating:"Moderate to High",description:"A general rating of 'Moderate' to 'High' is recommended for fruit crops, as it ensures good growth and quality."}}},p='\n    <div class="container mt-4">\n        <h4>'.concat(t.charAt(0).toUpperCase()+t.slice(1),' Nutrients</h4>\n        <hr />\n        <div class="card mb-3">\n            <div class="card-body">\n                <div class="').concat(n(r.nitrogen.value).background," ").concat(n(r.nitrogen.value).textColor,' p-2">\n                    <p><strong>Nitrogen:</strong> <span class="small">').concat(r.nitrogen.value,'</span> <span class="badge text-white bg-secondary">').concat(r.nitrogen.percentage,'%</span></p>\n                    <p class="small">').concat(s[t].npk.nitrogen.description,'</p>\n                    <p class="small"><strong>Recommended Level:</strong> ').concat(s[t].npk.nitrogen.level,'</p>\n                </div>\n                <hr />\n\n                <div class="').concat(n(r.phosphorus.value).background," ").concat(n(r.phosphorus.value).textColor,' p-2">\n                    <p><strong>Phosphorus:</strong> <span class="small">').concat(r.phosphorus.value,'</span> <span class="badge text-white bg-secondary">').concat(r.phosphorus.percentage,'%</span></p>\n                    <p class="small">').concat(s[t].npk.phosphorus.description,'</p>\n                    <p class="small"><strong>Recommended Level:</strong> ').concat(s[t].npk.phosphorus.level,'</p>\n                </div>\n                <hr />\n                \n                <div class="').concat(n(r.potassium.value).background," ").concat(n(r.potassium.value).textColor,' p-2">\n                    <p><strong>Potassium:</strong> <span class="small">').concat(r.potassium.value,'</span> <span class="badge text-white bg-secondary">').concat(r.potassium.percentage,'%</span></p>\n                    <p class="small">').concat(s[t].npk.potassium.description,'</p>\n                    <p class="small"><strong>Recommended Level:</strong> ').concat(s[t].npk.potassium.level,'</p>\n                </div>\n                <hr />\n                \n                <div class="').concat(n(r.ph.value).background," ").concat(n(r.ph.value).textColor,' p-2">\n                    <p><strong>pH:</strong> <span class="small">').concat(r.ph.value,'</span> <span class="badge text-white bg-secondary">').concat(r.ph.percentage,'%</span></p>\n                    <p class="small">').concat(s[t].ph.description,'</p>\n                    <p class="small"><strong>Recommended Level:</strong> ').concat(s[t].ph.level,'</p>\n                </div>\n                <hr />\n                \n                <div class="').concat(n(r.generalRating.value).background," ").concat(n(r.generalRating.value).textColor,' p-2">\n                    <p><strong>General Rating:</strong> <span class="small">').concat(r.generalRating.value,'</span> <span class="badge text-white bg-secondary">').concat(r.generalRating.percentage,'%</span></p>\n                    <p class="small">').concat(s[t].generalRating.description,'</p>\n                    <p class="small"><strong>Recommended Level:</strong> ').concat(s[t].generalRating.rating,"</p>\n                </div>\n            </div>\n        </div>\n    </div>\n"),d={config:o,breakdownHtml:p};switch(t){case"vegetables":case"rice":case"fruits":i.push({type:t,printDataSoil:d})}c.append(p)}var h,f,g,m,v,y,b}function l(t){switch(t){case"L":return 1;case"ML":return 2;case"MH":return 3;case"H":return 4;default:return 0}}function u(t,e){var n=t/e,r=n/4*100;return{value:p(n),percentage:r.toFixed(2)}}function p(t){return t<=1.5?"Low":t<=2.5?"Moderately Low":t<=3.5?"Moderately High":"High"}function h(t,e,n){var o="".concat(e.toLowerCase(),".").concat(t),c="".concat(e.toLowerCase());"csv"===t?function(t,e){t="Soil Health_"+a+"_"+t.charAt(0).toUpperCase()+t.slice(1);var n=Object.keys(e[0]).slice(0,-2),o=e.slice(2,-2),i=o.sort((function(t,e){return new Date(t.monthYear)-new Date(e.monthYear)}));function c(t){return null==t?"":("string"==typeof t&&(t.includes(",")||t.includes('"')||t.includes("\n"))&&(t='"'.concat(t.replace(/"/g,'""'),'"')),t)}var s=[n.join(",")].concat(g(i.map((function(t){return n.map((function(e){return c(void 0!==t[e]?t[e]:"")})).join(",")})))).join("\n"),l=new Blob([s],{type:"text/csv"}),u=URL.createObjectURL(l),p=document.createElement("a");p.href=u,p.download=t,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(u),(0,r.IZ)(t,"CSV")}(o,n):"xlsx"===t?function(t,e){t="Soil Health_"+a+"_"+t.charAt(0).toUpperCase()+t.slice(1);var n=Object.keys(e[0]).slice(2,-2),o=e.slice(2,-2).sort((function(t,e){return new Date(t.monthYear)-new Date(e.monthYear)})),i=new ExcelJS.Workbook,c=i.addWorksheet("Sheet1");c.addRow(n),o.forEach((function(t){var e=n.map((function(e){return t[e]}));c.addRow(e)}));var s={font:{name:"Calibri",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"B1BA4D"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}}}},l={font:{name:"Calibri",size:11},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}}}},u=c.getRow(1);u.eachCell({includeEmpty:!0},(function(t){t.style=s})),u.height=20,c.eachRow({includeEmpty:!0},(function(t,e){e>1&&t.eachCell({includeEmpty:!0},(function(t){t.style=l}))})),c.columns=n.map((function(t){return{width:Math.max(t.length,10)+5}})),i.xlsx.writeBuffer().then((function(e){var n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=t,o.click(),URL.revokeObjectURL(r)})),(0,r.IZ)(t,"XLSX")}(o,n):"pdf"===t&&function(t,e){console.log(e);var n=i.find((function(t){return t.type===e}));if(n){sessionStorage.setItem("printDataSoil",JSON.stringify(n.printDataSoil));var o=window.open("/print-soil-health","_blank");o.onload=function(){o.print()},(0,r.IZ)(t,"PDF")}else console.error("No print data found for type:",e)}(o,c)}$(document).ready((function(){$("#infoBtn").click((function(){d.showInfoModal("\n        <p>Welcome to the Soil Health Monitoring page. This tool allows you to monitor and analyze the average soil health in Cabuyao by tracking key soil parameters. Follow these instructions to use the tool effectively:</p>\n\n        <ol>\n          <li><strong>Monitor Soil Health:</strong><br>\n          This page provides an overview of soil health based on data collected from soil test kits provided to local farmers. Key parameters monitored include:\n            <ul>\n              <li><strong>Nitrogen (N):</strong> The amount of nitrogen in the soil, which is essential for plant growth.</li>\n              <li><strong>Phosphorus (P):</strong> The amount of phosphorus present, which supports root development and energy transfer.</li>\n              <li><strong>Potassium (K):</strong> The amount of potassium, which helps in disease resistance and overall plant health.</li>\n              <li><strong>pH Levels:</strong> The acidity or alkalinity of the soil, affecting nutrient availability and microbial activity.</li>\n              <li><strong>General Rating:</strong> An overall rating of soil fertility based on the combined results of NPK and pH levels.</li>\n            </ul>\n          </li>\n\n          <li><strong>View Average Soil Health:</strong><br>\n          The page displays average values for NPK, pH, and general rating across different fields and areas within Cabuyao. This helps in understanding the overall soil health in the city.</li>\n\n          <li><strong>Update Soil Health Records:</strong><br>\n          Regular updates are made based on new soil test results. Farmers are encouraged to submit their soil test data to ensure continuous monitoring and accurate assessments.</li>\n\n          <li><strong>Download Soil Health Data:</strong><br>\n          You can download the soil health data in various formats for offline review and analysis:\n            <ul>\n              <li><strong>CSV:</strong> Download raw soil health data in CSV format for use in data analysis tools.</li>\n              <li><strong>Excel:</strong> Download the data in Excel format, including formatted tables for easy review and manipulation.</li>\n              <li><strong>PDF:</strong> Download a summary of soil health data through a table, in PDF format for sharing or reporting.</li>\n            </ul>\n          </li>\n        </ol>\n\n        <p>This tool is designed to provide comprehensive monitoring of soil health in Cabuyao. By utilizing the provided data and download options, you can keep track of soil conditions and make informed decisions to maintain and improve soil fertility in the area.</p>\n        ")}))})),function(){c.apply(this,arguments)}(),fetch("api/soilhealths").then((function(t){return t.json()})).then((function(r){t=r.filter((function(t){return"Vegetables"===t.fieldType})),e=r.filter((function(t){return"Rice"===t.fieldType})),n=r.filter((function(t){return"Fruit Trees"===t.fieldType})),s("vegetables",t),s("rice",e),s("fruits",n),$(document).ready((function(){$(".download-btn").click((function(){var r=this;d.downloadDialog().then((function(a){"vegetables"===(o=$(r).data("type"))?h(a,"Vegetables",t):"rice"===o?h(a,"Rice",e):"fruits"===o&&h(a,"Fruits",n)})).catch((function(t){console.error("Error:",t)}))}))}))})).catch((function(t){return console.error("Error fetching data:",t)}))}))})();