/*! For license information please see topCrops.js.LICENSE.txt */
(()=>{"use strict";var t={370:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(){c=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),c=new C(n||[]);return a(i,"_invoke",{value:T(t,r,c)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var E={};p(E,s,(function(){return this}));var L=Object.getPrototypeOf,P=L&&L(L(F([])));P&&P!==r&&o.call(P,s)&&(E=P);var O=x.prototype=b.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(a,i,c,s){var u=d(t[a],t,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):e.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=d(e,r,n);if("normal"===u.type){if(o=n.done?m:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(o.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},A(j.prototype),p(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(O),p(O,l,"Generator"),p(O,s,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function s(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){s(a,n,o,i,c,"next",t)}function c(t){s(a,n,o,i,c,"throw",t)}i(void 0)}))}}function l(){return p.apply(this,arguments)}function p(){return p=u(c().mark((function t(){var e,r,n=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t.prev=1,t.next=4,$.ajax({url:"api/crops",type:"GET",dataType:"json"});case 4:return r=t.sent,t.abrupt("return",r.filter((function(t){return!e||t.croptype.toLowerCase()===e.toLowerCase()})));case 8:throw t.prev=8,t.t0=t.catch(1),console.error("An error occurred while fetching the crop data:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),p.apply(this,arguments)}function f(){return d.apply(this,arguments)}function d(){return d=u(c().mark((function t(){var e,r=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,$.ajax({url:"api/crop-varieties",type:"GET",dataType:"json"});case 4:return e=t.sent,t.abrupt("return",e);case 8:throw t.prev=8,t.t0=t.catch(1),console.error("An error occurred while fetching the crop data:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),d.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=u(c().mark((function t(){var e,r,n,o,i,s,u=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:"",r=u.length>1&&void 0!==u[1]?u[1]:"",t.prev=2,t.next=5,$.ajax({url:"api/riceProductions",type:"GET",dataType:"json"});case 5:return n=t.sent,o=e?e.toLowerCase():"",i=r?r.toLowerCase():"",s=n.filter((function(t){return!(""!==o&&t.cropName.toLowerCase()!==o||""!==i&&t.season.toLowerCase()!==i)})).map((function(t){var e=t.barangay.charAt(0).toUpperCase()+t.barangay.slice(1).toLowerCase();return a(a({},t),{},{barangay:e})})),t.abrupt("return",s);case 12:throw t.prev=12,t.t0=t.catch(2),console.error("An error occurred while fetching the rice production data:",t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,12]])}))),y.apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return m=u(c().mark((function t(){var e,r,n,o,a,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",r=i.length>1&&void 0!==i[1]?i[1]:"",t.prev=2,t.next=5,$.ajax({url:"api/productions",type:"GET",dataType:"json"});case 5:return n=t.sent,o=e?e.toLowerCase():"",a=r?r.toLowerCase():"",t.abrupt("return",n.filter((function(t){return!(""!==o&&t.cropName.toLowerCase()!==o||""!==a&&t.season.toLowerCase()!==a)})));case 11:throw t.prev=11,t.t0=t.catch(2),console.error("An error occurred while fetching the production data:",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),m.apply(this,arguments)}function g(){return b.apply(this,arguments)}function b(){return b=u(c().mark((function t(){var e,r,n,o,a,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",r=i.length>1&&void 0!==i[1]?i[1]:"",t.prev=2,t.next=5,$.ajax({url:"api/prices",type:"GET",dataType:"json"});case 5:return n=t.sent,o=e?e.toLowerCase():"",a=r?r.toLowerCase():"",t.abrupt("return",n.filter((function(t){return!(""!==o&&t.cropName.toLowerCase()!==o||""!==a&&t.season.toLowerCase()!==a)})));case 11:throw t.prev=11,t.t0=t.catch(2),console.error("An error occurred while fetching the price data:",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),b.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return x=u(c().mark((function t(){var e,r,n,o,a,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",r=i.length>1&&void 0!==i[1]?i[1]:"",t.prev=2,t.next=5,$.ajax({url:"api/pests",type:"GET",dataType:"json"});case 5:return n=t.sent,o=e?e.toLowerCase():"",a=r?r.toLowerCase():"",t.abrupt("return",n.filter((function(t){return!(""!==o&&t.cropName.toLowerCase()!==o||""!==a&&t.season.toLowerCase()!==a)})));case 11:throw t.prev=11,t.t0=t.catch(2),console.error("An error occurred while fetching the pest data:",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),x.apply(this,arguments)}function E(){return L.apply(this,arguments)}function L(){return L=u(c().mark((function t(){var e,r,n,o,a,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",r=i.length>1?i[1]:void 0,t.prev=2,t.next=5,$.ajax({url:"api/diseases",type:"GET",dataType:"json"});case 5:return n=t.sent,o=e?e.toLowerCase():"",a=r?r.toLowerCase():"",t.abrupt("return",n.filter((function(t){return!(""!==o&&t.cropName.toLowerCase()!==o||""!==a&&t.season.toLowerCase()!==a)})));case 11:throw t.prev=11,t.t0=t.catch(2),console.error("An error occurred while fetching the disease data:",t.t0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),L.apply(this,arguments)}function P(t,e){return new Promise((function(r,n){$.ajax({url:"api/downloads/add",method:"POST",dataType:"json",data:{name:t,type:e},success:function(t){r(t)},error:function(t,e,r){console.error("Failed to add download:",e,r),n(t.responseJSON||"An error occurred")}})}))}function O(t,e){return new Promise((function(r,n){$.ajax({url:"/api/production/total-area-planted/".concat(t,"/").concat(e),type:"GET",dataType:"json",success:function(t){var e=t.totalAreaPlanted;r(e)},error:function(t,e,r){console.error("Error fetching data:",t),n(r)}})}))}r.d(e,{$d:()=>l,HE:()=>w,IZ:()=>P,Lo:()=>E,Ox:()=>O,RK:()=>h,i:()=>v,tx:()=>f,y8:()=>g})},819:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new C(n||[]);return i(a,"_invoke",{value:T(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var E={};p(E,s,(function(){return this}));var L=Object.getPrototypeOf,P=L&&L(L(F([])));P&&P!==r&&a.call(P,s)&&(E=P);var O=x.prototype=b.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,c,s){var u=d(t[o],t,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&a.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):e.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}})}function T(e,r,n){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=d(e,r,n);if("normal"===u.type){if(o=n.done?m:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=x,i(O,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},A(j.prototype),p(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(O),p(O,l,"Generator"),p(O,s,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function a(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],s=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function s(t){var e=t.match(/^(\d+(\.\d+)?)\/pc$/),r=t.match(/^(\d+(\.\d+)?)\/bundle$/);if("string"==typeof t&&t.includes("-")){var n=i(t.split("-").map(parseFloat),2);return(n[0]+n[1])/2}if(e){return parseFloat(e[1])/.2}if(r){return parseFloat(r[1])/1}return parseFloat(t)}function u(t,e,r,n,o,a){if(!(Array.isArray(t)&&Array.isArray(e)&&Array.isArray(r)&&Array.isArray(n)))return console.error("Expected all inputs to be arrays"),[];var i=o.reduce((function(t,e){return t[e.cropName]||(t[e.cropName]=e.cropType),t}),{}),c=t.filter((function(t){return i[t.cropName]===a})),u=e.filter((function(t){return i[t.cropName]===a})),l=r.filter((function(t){return i[t.cropName]===a})),p=n.filter((function(t){return i[t.cropName]===a})),f=new Map;return c.forEach((function(t){var e=t.cropName,r=t.areaPlanted,n=t.volumeSold,o=t.volumeProduction,a=t.price,c=t.productionCost,u=e;f.has(u)||f.set(u,{cropName:e,cropType:i[e],totalPlanted:0,totalArea:0,totalVolume:0,price:0,pestOccurrence:0,diseaseOccurrence:0,totalIncome:0,totalProfit:0});var l=f.get(u);l.totalPlanted+=1,l.totalVolume+=o||0,l.totalArea+=r||0,l.totalIncome+=(1e3*n||0)*s(a),l.totalProfit+=(1e3*n||0)*(s(a)||0)-(c||0)})),u.forEach((function(t){var e=t.cropName,r=s(t.price);f.forEach((function(t,n){n===e&&(t.totalPrice||(t.totalPrice=0,t.count=0),t.totalPrice+=r,t.count+=1)}))})),l.forEach((function(t){var e=t.cropName;f.forEach((function(t,r){r===e&&(t.pestOccurrence+=1)}))})),p.forEach((function(t){var e=t.cropName;f.forEach((function(t,r){r===e&&(t.diseaseOccurrence+=1)}))})),f.forEach((function(t,e){t.count>0&&(t.price=t.totalPrice/t.count,delete t.totalPrice,delete t.count)})),Array.from(f.values())}function l(t){return p.apply(this,arguments)}function p(){var t;return t=o().mark((function t(e){var r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Array.isArray(e)){t.next=3;break}return console.error("Expected production to be an array"),t.abrupt("return",[]);case 3:return r=0,n=0,e.filter((function(t){return"Rice"===t.cropName})).forEach((function(t){r+=t.areaPlanted||0,n+=t.volumeProduction||0})),a=r>0?n/r:0,t.abrupt("return",[{cropName:"Rice",cropType:"Rice",totalArea:r,totalVolume:n,averageYield:a}]);case 9:case"end":return t.stop()}}),t)})),p=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,s,"next",t)}function s(t){a(i,n,o,c,s,"throw",t)}c(void 0)}))},p.apply(this,arguments)}r.d(e,{qA:()=>l,xq:()=>u})}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new C(n||[]);return i(a,"_invoke",{value:T(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",g={};function b(){}function w(){}function x(){}var E={};p(E,s,(function(){return this}));var L=Object.getPrototypeOf,P=L&&L(L(F([])));P&&P!==r&&a.call(P,s)&&(E=P);var O=x.prototype=b.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,c,s){var u=d(t[o],t,i);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==n(p)&&a.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):e.resolve(p).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}})}function T(e,r,n){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var u=d(e,r,n);if("normal"===u.type){if(o=n.done?m:y,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=x,i(O,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},A(j.prototype),p(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(f(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(O),p(O,l,"Generator"),p(O,s,(function(){return this})),p(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function a(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,s,"next",t)}function s(t){a(i,n,o,c,s,"throw",t)}c(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function s(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var l=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=null,r=[{key:"confirmDialog",value:(l=i(o().mark((function t(e,r){var n,a,i,c,s,u,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.createElement("dialog"),a=document.createElement("h4"),i=document.createElement("div"),c=document.createElement("div"),s=document.createElement("button"),u=document.createElement("button"),n.setAttribute("id","inputDialog"),a.setAttribute("id","title"),i.setAttribute("id","message"),c.setAttribute("id","divButtons"),s.setAttribute("id","btnOk"),s.innerText="OK",u.setAttribute("id","btnCancel"),u.innerText="Cancel",c.append(s,u),n.append(a,i,c),$("body").prepend(n),l={operation:0},t.abrupt("return",new Promise((function(t){n.open||(n.showModal(),a.innerText=e,i.innerHTML=r,s.addEventListener("click",(function(){n.close(),$(n).remove(),l.operation=1,t(l)})),u.addEventListener("click",(function(){n.close(),$(n).remove(),l.operation=0,t(l)})))})));case 19:case"end":return t.stop()}}),t)}))),function(t,e){return l.apply(this,arguments)})},{key:"changePasswordDialog",value:(u=i(o().mark((function t(e,r){var n,a,i,c,s,u,l,p,f,d,h;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.createElement("dialog"),a=document.createElement("h4"),i=document.createElement("div"),c=document.createElement("form"),s=document.createElement("input"),u=document.createElement("input"),l=document.createElement("div"),p=document.createElement("button"),f=document.createElement("button"),d=document.createElement("div"),s.setAttribute("class","form-control mb-3"),u.setAttribute("class","form-control"),n.setAttribute("id","inputDialog"),a.setAttribute("id","title"),i.setAttribute("id","message"),l.setAttribute("id","divButtons"),p.setAttribute("id","btnSave"),p.innerText="Save",f.setAttribute("id","btnCancel"),f.innerText="Cancel",s.setAttribute("type","password"),s.setAttribute("placeholder","New Password"),s.setAttribute("id","newPassword"),u.setAttribute("type","password"),u.setAttribute("placeholder","Confirm Password"),u.setAttribute("id","confirmPassword"),d.setAttribute("id","errorMessage"),d.style.color="red",c.append(s,u,d),l.append(p,f),n.append(a,i,c,l),document.body.prepend(n),h={operation:0,newPassword:null},t.abrupt("return",new Promise((function(t){function o(){var t=s.value.trim(),e=u.value.trim();t!==e&&e.length>0?d.innerText="Passwords do not match.":/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(t)?d.innerText="":d.innerText="Password must be at least 8 characters \nand include both letters and numbers."}n.showModal(),a.innerText=e,i.innerHTML=r,p.addEventListener("click",(function(){var e=s.value.trim();e===u.value.trim()?(n.close(),$(n).remove(),h.operation=1,h.newPassword=e,t(h)):d.innerText="Passwords do not match. Please try again."})),f.addEventListener("click",(function(){n.close(),$(n).remove(),t(h)})),s.addEventListener("input",o),u.addEventListener("input",o)})));case 34:case"end":return t.stop()}}),t)}))),function(t,e){return u.apply(this,arguments)})},{key:"showCropModal",value:(s=i(o().mark((function t(e,r,n,a){var i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=document.createElement("dialog")).setAttribute("id","messageDialog"),i.style.width="700px",i.style.padding="20px",i.style.textAlign="center",i.style.borderRadius="0.5rem",a.sort((function(t,e){return e.totalAreaPlanted-t.totalAreaPlanted})),i.innerHTML='\n        <div class="container-fluid">\n            <ul class="nav nav-tabs d-flex justify-content-around w-100" style="border-bottom: 2px solid #007bff;">\n                <li class="nav-item w-50">\n                    <a class="nav-link active bg-white text-center w-100" id="cropInfoTab" href="#" style="font-weight: bold; color: #28a745;">Crop Information</a>\n                </li>\n                <li class="nav-item w-50">\n                    <a class="nav-link bg-white text-center w-100" id="varietyTab" href="#" style="font-weight: bold; color: #6c757d;">Variety</a>\n                </li>\n            </ul>\n            <div class="tab-content">\n                <div class="tab-pane fade show active bg-transparent" id="cropInfoContent" style="text-align: justify; font-size: 0.9rem; margin-top: 15px;">\n                    <div class="text-center">\n                        <div style="background-color: #C9AF94; color: white; padding: 10px; border-radius: 8px; font-weight: bold; font-size: 1.5rem; margin-bottom: 15px;">\n                            '.concat(n,'\n                        </div>\n                        <img id="cropImg" src="').concat(e,'" alt="Crop Image" class="img-fluid border border-primary rounded" style="width: 30rem; height: auto; margin-bottom: 10px;">\n                    </div>\n    \n                    <div class="text-dark mt-2">').concat(r,'</div>\n                </div>\n                <div class="tab-pane fade bg-transparent" id="varietyContent" style="text-align: justify; font-size: 0.9rem; color: #333;">\n                    <div class="accordion" id="varietyAccordion">\n                        ').concat(a.map((function(t,e){return'\n                        <div class="accordion-item">\n                            <h2 class="accordion-header" id="heading'.concat(e,'">\n                                <button class="bg-success accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse').concat(e,'" aria-expanded="false" aria-controls="collapse').concat(e,'">\n                                    ').concat(t.varietyName," (Total Area Planted: ").concat(t.totalAreaPlanted,')\n                                </button>\n                            </h2>\n                            <div id="collapse').concat(e,'" class="accordion-collapse collapse" aria-labelledby="heading').concat(e,'" data-bs-parent="#varietyAccordion">\n                                <div class="accordion-body">\n                                    <img src="').concat(t.cropImg,'" alt="').concat(t.varietyName,' Image" class="img-fluid border border-primary rounded" style="width: 20rem; height: auto; margin-bottom: 10px;">\n                                    <p><strong>Characteristics:</strong></p>\n                                    <p><strong>Color:</strong> ').concat(t.color,"</p>\n                                    <p><strong>Size:</strong> ").concat(t.size,"</p>\n                                    <p><strong>Flavor:</strong> ").concat(t.flavor,"</p>\n                                    <p><strong>Growth Conditions:</strong> ").concat(t.growthConditions,"</p>\n                                    <p><strong>Pest/Disease Resistance:</strong> ").concat(t.pestDiseaseResistance,"</p>\n                                    <p><strong>Recommended Practices:</strong> ").concat(t.recommendedPractices,"</p>\n                                </div>\n                            </div>\n                        </div>\n                        ")})).join(""),'\n                    </div>\n                </div>\n            </div>\n            <div class="d-flex justify-content-center mt-3">\n                <button id="btnClose" class="btn btn-danger" style="font-weight: bold;">Close</button>\n            </div>\n        </div>\n        '),document.body.append(i),c={operation:0},t.abrupt("return",new Promise((function(t){if(!i.open){i.showModal();var e=i.querySelector("#cropInfoContent"),r=i.querySelector("#varietyContent");i.querySelector(".nav-tabs").addEventListener("click",(function(t){var n=t.target;"cropInfoTab"===n.id?(e.classList.add("show","active"),r.classList.remove("show","active"),n.style.color="#28a745",i.querySelector("#varietyTab").style.color="#6c757d"):"varietyTab"===n.id&&(r.classList.add("show","active"),e.classList.remove("show","active"),n.style.color="#28a745",i.querySelector("#cropInfoTab").style.color="#6c757d")})),i.querySelector("#btnClose").addEventListener("click",(function(){i.close(),i.remove(),c.operation=1,t(c)}))}})));case 11:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return s.apply(this,arguments)})},{key:"downloadDialog",value:(a=i(o().mark((function t(){var e,r,n,a,i,c,s,u,l,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.createElement("dialog"),r=document.createElement("div"),n=document.createElement("h5"),a=document.createElement("div"),i=document.createElement("button"),c=document.createElement("button"),s=document.createElement("button"),u=document.createElement("button"),e.setAttribute("id","downloadModal"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","downloadModalLabel"),e.style.padding="20px",e.style.borderRadius="8px",e.style.maxWidth="400px",e.style.boxShadow="0 4px 10px rgba(0, 0, 0, 0.1)",n.className="modal-title text-center mb-4",n.id="downloadModalLabel",n.innerText="Download Options",u.type="button",u.innerText="Close",u.className="dialog-close btn btn-secondary",u.style.width="100%",u.addEventListener("click",(function(){e.close()})),i.className="btn btn-primary mb-3",i.innerHTML='<i class="fas fa-file-csv"></i> Download CSV',i.setAttribute("data-format","csv"),i.style.width="100%",c.className="btn btn-success mb-3",c.innerHTML='<i class="fas fa-file-excel"></i> Download Excel',c.setAttribute("data-format","xlsx"),c.style.width="100%",s.className="btn btn-danger mb-3",s.innerHTML='<i class="fas fa-file-pdf"></i> Download PDF',s.setAttribute("data-format","pdf"),s.style.width="100%",p=new Promise((function(t){l=t})),[i,c,s].forEach((function(t){t.addEventListener("click",(function(t){var r=t.currentTarget.getAttribute("data-format");l&&l(r),e.close()}))})),a.className="d-grid gap-3",a.append(i,c,s,u),r.className="text-center",r.append(n,a),e.appendChild(r),document.body.appendChild(e),e.showModal(),t.abrupt("return",p);case 45:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"showInfoModal",value:(n=i(o().mark((function t(e){var r,n,a,i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.createElement("dialog"),n=document.createElement("div"),a=document.createElement("button"),i=document.createElement("div"),r.setAttribute("id","messageDialog"),a.setAttribute("id","btnClose"),a.innerText="Close",r.style.maxWidth="1000px",r.style.padding="20px",r.style.fontSize="1em",r.style.textAlign="justify",r.style.margin="20px",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="center",n.style.gap="20px",n.style.margin="20px",n.innerHTML=e,i.style.display="flex",i.style.justifyContent="flex-end",i.append(a),n.append(i),r.append(n),document.body.append(r),c={operation:0},t.abrupt("return",new Promise((function(t){r.open||(r.showModal(),a.addEventListener("click",(function(){r.close(),r.remove(),c.operation=1,t(c)})))})));case 26:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})}],e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,a,s,u,l}();s(l,"OK_OPTION",1),s(l,"CANCEL_OPTION",0);const p=l;var f=r(370),d=r(819);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=E(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(){w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:T(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",y="executing",v="completed",m={};function g(){}function b(){}function x(){}var E={};u(E,i,(function(){return this}));var L=Object.getPrototypeOf,P=L&&L(L(F([])));P&&P!==r&&n.call(P,i)&&(E=P);var O=x.prototype=g.prototype=Object.create(E);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,i,c){var s=p(t[o],t,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==h(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function T(e,r,n){var o=f;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=p(e,r,n);if("normal"===u.type){if(o=n.done?v:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function F(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return b.prototype=x,o(O,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},A(j.prototype),u(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new j(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(O),u(O,s,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=F,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function E(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}function L(t,e,r,n,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function P(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){L(a,n,o,i,c,"next",t)}function c(t){L(a,n,o,i,c,"throw",t)}i(void 0)}))}}var O=[],A=[],j=[];function T(){return S.apply(this,arguments)}function S(){return(S=P(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.$d)();case 3:O=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("Failed to initialize crops:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function k(){return N.apply(this,arguments)}function N(){return(N=P(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.tx)();case 3:A=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("Failed to initialize crop varieties:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function C(t,e){return 0===e?0:t/e*100}$(document).ready((function(){$("#infoBtn").click((function(){p.showInfoModal("\n        <p>Welcome to the Top Crops page. This tool allows you to rank crops based on various performance indicators. Follow these instructions to use the tool effectively:</p>\n\n        <ol>\n          <li><strong>Understand Ranking Criteria:</strong><br>\n          Crops are ranked based on a composite score that includes production volume, price, income, revenue, and pest/disease occurrences etc. The formula for calculating the composite score is as follows:</li>\n        </ol>\n\n        <pre>\n        Composite Score = (Production Volume Score * Weight1) +\n                          (Price Score * Weight2) +\n                          (Income Score * Weight3) +\n                          (Revenue Score * Weight4) -\n                          (Pest/Disease Score * Weight5)\n                          + ... (additional factors)\n        </pre>\n\n        <p>Where the scores for each factor are normalized and weighted according to their importance. The weights (Weight1, Weight2, etc.) are predefined to reflect the relative significance of each factor. The formula may also include other factors relevant to crop performance.</p>\n\n        <ol start=\"2\">\n          <li><strong>View Rankings:</strong><br>\n          The crops are displayed in descending order of their composite score. Higher scores indicate better overall performance based on the selected criteria.</li>\n\n          <li><strong>Access Crop Details:</strong><br>\n          Click the 'View' button next to a crop to open a modal with detailed information. This modal includes:\n            <ul>\n              <li><strong>Crop Image:</strong> A visual representation of the crop variety.</li>\n              <li><strong>Crop Information:</strong> Details such as maturity period, variety, and other relevant data.</li>\n            </ul>\n          </li>\n\n          <li><strong>Download Data:</strong><br>\n          You can download the data in various formats for further analysis:\n            <ul>\n              <li><strong>CSV:</strong> Download raw data in CSV format for use in spreadsheet applications or data analysis tools.</li>\n              <li><strong>Excel:</strong> Download the data in Excel format, which includes formatted tables for easy review and manipulation.</li>\n              <li><strong>PDF:</strong> Download table in PDF format for easy sharing and reporting.</li>\n            </ul>\n          </li>\n        </ol>\n\n        <p>This tool is designed to help you rank crops transparently and make informed decisions based on comprehensive performance data.</p>\n        ")}))}));var F=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.season=e,this.type=r,this.initialize()},e=[{key:"initialize",value:(n=P(w().mark((function t(){var e,r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(this.season,this.type);case 3:e=t.sent,r=this.generateTopCrops(e),this.displayTopCrops(r),j=r,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Failed to initialize TopCrops:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return n.apply(this,arguments)})},{key:"generateTopCrops",value:function(t){return console.log(t),Array.isArray(t)?t.map((function(t){var e=t.totalArea>0?t.totalVolume/t.totalArea:0,r=e;return"Rice"===t.cropType?{cropName:t.cropName,type:t.cropType,compositeScore:r,remarks:"Rice: The total area is <strong>".concat(t.totalArea.toFixed(2)," hectares</strong>. ")+"The total volume is <strong>".concat(t.totalVolume.toFixed(2),"</strong>. ")+"The average yield is <strong>".concat(t.averageYield.toFixed(2),"</strong>."),totalArea:t.totalArea,totalVolume:t.totalVolume,averageYield:t.averageYield}:{cropName:t.cropName,type:t.cropType,compositeScore:r,remarks:"The total area is <strong>".concat(t.totalArea.toFixed(2)," hectares</strong>. ")+"Average volume per hectare is <strong>".concat(e.toFixed(2),"</strong>. ")+"The current price stands at <strong>".concat(t.price.toFixed(2),"</strong>. ")+"Pest occurrences total <strong>".concat(t.pestOccurrence,"</strong>, which is <strong>").concat(C(t.pestOccurrence,t.totalPlanted).toFixed(2),"%</strong> of the total planted area. ")+"Disease occurrences are <strong>".concat(t.diseaseOccurrence,"</strong>, representing <strong>").concat(C(t.diseaseOccurrence,t.totalPlanted).toFixed(2),"%</strong> of the total planted area. ")+"Additionally, the average income per hectare is <strong>".concat((t.totalIncome/t.totalArea).toFixed(2),"</strong>, ")+"while the average profit per hectare amounts to <strong>".concat((t.totalProfit/t.totalArea).toFixed(2),"</strong>."),volumeProductionPerHectare:e.toFixed(2),price:t.price.toFixed(2),pestOccurrence:t.pestOccurrence,diseaseOccurrence:t.diseaseOccurrence,totalArea:t.totalArea,totalVolume:t.totalVolume}})).sort((function(t,e){return e.compositeScore-t.compositeScore})):(console.error("Expected input to be an array"),[])}},{key:"displayTopCrops",value:function(t){var e=$("#cropsTable tbody");e.empty();var r=t.map((function(t){var e=O.find((function(e){return e.cropName===t.cropName}));if(!e)return Promise.resolve('<tr class="text-center">\n                    <td>'.concat(t.cropName,"</td>\n                    <td>").concat(t.type,"</td>\n                    <td>").concat(t.remarks,"</td>\n                    <td>No details available</td>\n                </tr>"));var r=A.filter((function(t){return t.cropId===e.cropId}));if(r.length>0){var n=r.map((function(t){return(0,f.Ox)(t.cropId,t.varietyName).then((function(e){return t.totalAreaPlanted=parseFloat(e).toFixed(2),{varietyName:t.varietyName,totalAreaPlanted:t.totalAreaPlanted,cropImg:t.cropImg,color:t.color,flavor:t.flavor,size:t.size,growthConditions:t.growthConditions,pestDiseaseResistance:t.pestDiseaseResistance,recommendedPractices:t.recommendedPractices}}))}));return Promise.all(n).then((function(r){var n=e.cropImg||"",o="\n                        <div class='card m-3 shadow-sm'>\n                            <div class='card-header bg-success text-white'>\n                                <h5 class='mb-0'>Crop Details</h5>\n                            </div>\n                            <div class='card-body'>\n                                <p class='card-text'><strong>Scientific Name:</strong> <span class='text-primary'>".concat(e.scientificName||"N/A","</span></p>\n                                <p class='card-text'><strong>Unit:</strong> <span class='text-primary'>").concat(e.unit||"N/A","</span></p>\n                                <p class='card-text'><strong>Weight:</strong> <span class='text-primary'>").concat(e.weight||"N/A","</span></p>\n                                <p class='card-text'><strong>Planting Season:</strong> <span class='text-primary'>").concat(e.plantingSeason||"N/A","</span></p>\n                                <p class='card-text'><strong>Growth Duration:</strong> <span class='text-primary'>").concat(e.growthDuration||"N/A","</span></p>\n                            </div>\n                        </div>\n                    "),a=e.cropName;return'<tr class="text-center">\n                        <td>'.concat(t.cropName,"</td>\n                        <td>").concat(t.type,"</td>\n                        <td>").concat(t.remarks,'</td>\n                        <td>\n                            <button class="btn btn-green view-btn" \n                                data-img="').concat(n,'" \n                                data-description="').concat(o,'" \n                                data-crop="').concat(a,"\" \n                                data-variety='").concat(JSON.stringify(r),"'>\n                                View Information\n                            </button>\n                        </td>\n                    </tr>")}))}var o=e.cropImg||"",a="\n                    <div class='card m-3 shadow-sm'>\n                        <div class='card-header bg-success text-white'>\n                            <h5 class='mb-0'>Crop Details</h5>\n                        </div>\n                        <div class='card-body'>\n                            <p class='card-text'><strong>Scientific Name:</strong> <span class='text-primary'>".concat(e.scientificName||"N/A","</span></p>\n                            <p class='card-text'><strong>Unit:</strong> <span class='text-primary'>").concat(e.unit||"N/A","</span></p>\n                            <p class='card-text'><strong>Weight:</strong> <span class='text-primary'>").concat(e.weight||"N/A","</span></p>\n                            <p class='card-text'><strong>Planting Season:</strong> <span class='text-primary'>").concat(e.plantingSeason||"N/A","</span></p>\n                            <p class='card-text'><strong>Growth Duration:</strong> <span class='text-primary'>").concat(e.growthDuration||"N/A","</span></p>\n                        </div>\n                    </div>\n                "),i=e.cropName;return'<tr class="text-center">\n                    <td>'.concat(t.cropName,"</td>\n                    <td>").concat(t.type,"</td>\n                    <td>").concat(t.remarks,'</td>\n                    <td>\n                        <button class="btn btn-green view-btn" \n                            data-img="').concat(o,'" \n                            data-description="').concat(a,'" \n                            data-crop="').concat(i,"\" \n                            data-variety='").concat(JSON.stringify([]),"'> \x3c!-- Empty array for varieties --\x3e\n                            View Information\n                        </button>\n                    </td>\n                </tr>")}));Promise.all(r).then((function(t){t.forEach((function(t){t&&e.append(t)})),$(".view-btn").on("click",P(w().mark((function t(){var e,r,n,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=$(this).data("img"),r=$(this).data("description"),n=$(this).data("crop"),o=$(this).data("variety"),t.next=6,p.showCropModal(e,r,n,o);case 6:t.sent.operation===p.OK_OPTION?console.log("Modal was closed by the user"):console.log("Modal was not closed");case 8:case"end":return t.stop()}}),t,this)}))))})).catch((function(t){console.error("Error fetching crop details:",t)}))}}],e&&x(t.prototype,e),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function _(t,e){return I.apply(this,arguments)}function I(){return(I=P(w().mark((function t(e,r){var n,o,a,i,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,f.i)("",e);case 3:return n=t.sent,t.next=6,(0,f.y8)("",e);case 6:return o=t.sent,t.next=9,(0,f.RK)("",e);case 9:return a=t.sent,t.next=12,(0,f.HE)("",e);case 12:return i=t.sent,t.next=15,(0,f.Lo)("",e);case 15:if(c=t.sent,n=n.map((function(t){return v(v({},t),{},{type:r})})),o=o.map((function(t){return v(v({},t),{},{type:r})})),i=i.map((function(t){return v(v({},t),{},{type:r})})),c=c.map((function(t){return v(v({},t),{},{type:r})})),console.log(r),"Rice"!==r){t.next=27;break}return t.next=24,d.qA(a);case 24:return t.abrupt("return",t.sent);case 27:return t.next=29,d.xq(n,o,i,c,O,r);case 29:return t.abrupt("return",t.sent);case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(0),console.error("An error occurred in the main function:",t.t0);case 35:case"end":return t.stop()}}),t,null,[[0,32]])})))).apply(this,arguments)}function D(t,e,r){var n="".concat(e.toLowerCase(),".").concat(t);"csv"===t?function(t,e){var r={cropName:"Crop Name",variety:"Variety",type:"Type",totalArea:"Total Area (ha)",volumeProductionPerHectare:"Average Volume Production (mt/ha)",incomePerHectare:"Average Income / ha ",profitPerHectare:"Average Profit / ha",price:"Price (kg)",pestOccurrence:"Pest Observed",diseaseOccurrence:"Disease Observed"},n=["cropName","type","totalArea","volumeProductionPerHectare","incomePerHectare","profitPerHectare","price","pestOccurrence","diseaseOccurrence"];function o(t){return null==t?"":("string"==typeof t&&(t.includes(",")||t.includes('"')||t.includes("\n"))&&(t='"'.concat(t.replace(/"/g,'""'),'"')),t)}var a=[n.map((function(t){return r[t]})).join(",")].concat(g(e.map((function(t){return n.map((function(e){var r=void 0!==t[e]?t[e]:"";return"incomePerHectare"===e||"profitPerHectare"===e||"price"===e?""!==r?"".concat(parseFloat(r).toFixed(2)):"":o(r)})).join(",")})))).join("\n"),i=new Blob([a],{type:"text/csv"}),c=URL.createObjectURL(i),s=document.createElement("a");s.href=c,s.download=$("#seasonSelect").val()+"_"+t.charAt(0).toUpperCase()+t.slice(1),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(c),(0,f.IZ)(t,"CSV")}(n,r):"xlsx"===t?function(t,e){var r={cropName:"Crop Name",type:"Type",totalArea:"Total Area (ha)",volumeProductionPerHectare:"Average Volume Production (mt/ha)",incomePerHectare:"Average Income / ha ",profitPerHectare:"Average Profit / ha",price:"Price (kg)",pestOccurrence:"Pest Observed",diseaseOccurrence:"Disease Observed"},n=["cropName","type","totalArea","volumeProductionPerHectare","incomePerHectare","profitPerHectare","price","pestOccurrence","diseaseOccurrence"],o=n.map((function(t){return r[t]})),a=e.map((function(t){var e={};return n.forEach((function(n){e[r[n]]=t[n]})),e})),i=new ExcelJS.Workbook,c=i.addWorksheet("Sheet1");c.addRow(o),a.forEach((function(t){c.addRow(n.map((function(e){var n=t[r[e]];return"incomePerHectare"===e||"profitPerHectare"===e||"price"===e?n?"".concat(parseFloat(n).toFixed(2)):"":n})))}));var s={font:{name:"Calibri",size:12,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"B1BA4D"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}}}},u={font:{name:"Calibri",size:11},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}}}},l=c.getRow(1);l.eachCell({includeEmpty:!0},(function(t){t.style=s})),l.height=20,c.eachRow({includeEmpty:!0},(function(t,e){e>1&&t.eachCell({includeEmpty:!0},(function(t){t.style=u}))})),c.columns=o.map((function(t){return{width:Math.max(t.length,10)+5}})),i.xlsx.writeBuffer().then((function(e){var r=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=$("#seasonSelect").val()+"_"+t.charAt(0).toUpperCase()+t.slice(1),o.click(),URL.revokeObjectURL(n)})),(0,f.IZ)(t,"XLSX")}(n,r):"pdf"===t&&function(t,e){var r=new(0,window.jspdf.jsPDF),n=["cropName","type","remarks"],o=n.map(G);r.autoTable({head:[o],body:e.map((function(t){return n.map((function(e){return"remarks"===e?function(t){var e=document.createElement("div");e.innerHTML=t;var r=e.textContent||e.innerText||"";return r=r.replace(/&nbsp;/g," ").replace(/[^\w\s.,-]/g,"").replace(/\s+/g," ").trim()}(t[e]):t[e]}))})),theme:"striped"}),r.save($("#seasonSelect").val()+"_"+t.charAt(0).toUpperCase()+t.slice(1)),(0,f.IZ)(t,"PDF")}(n,r)}function G(t){return t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))}$(document).ready(P(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:return t.next=4,k();case 4:new F("Dry","Vegetables"),$("#seasonSelect, #typeSelect").on("change",(function(){var t=$("#seasonSelect").val(),e=$("#typeSelect").val();"Rice"===e?(console.log(!0),$("#riceDisplay").show()):$("#riceDisplay").hide(),new F(t,e)})),$("#searchInput").on("keyup",(function(){var t=$(this).val().toLowerCase();$("#cropsTable tbody tr").filter((function(){$(this).toggle($(this).find("td:eq(0)").text().toLowerCase().indexOf(t)>-1||$(this).find("td:eq(1)").text().toLowerCase().indexOf(t)>-1)}))})),$(document).ready((function(){$(".download-btn").click((function(){p.downloadDialog().then((function(t){console.log(t),D(t,$("#typeSelect").val(),j)})).catch((function(t){console.error("Error:",t)}))}))}));case 8:case"end":return t.stop()}}),t)}))))})();